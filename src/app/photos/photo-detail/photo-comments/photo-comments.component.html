<div class="container div-geral-photo-comments" >
  <div *ngIf="comments as comments">
    <ul class="list-unstyled comment-list">
      <li *ngFor="let comment of comments">
        <a class="text-dark font-weight-bold mr-1 " [routerLink]="['/user', comment.user_name]">
          {{ comment.user_full_name | titlecase }}
        </a>
        <div class="row float-right">
          <div class="col-12 cursor-pointer">
              <i [matMenuTriggerFor]="menu" class="fa fa-ellipsis-v fa-2x" aria-hidden="true"></i>
            <mat-menu #menu="matMenu">
<!--              <span mat-menu-item (click)="excluir( comment.comment_id )">Excluir</span>-->
              <span mat-menu-item (click)="edit( comment )">Editar</span>
            </mat-menu>
          </div>
        </div>
        <div class="body-comment-text">
          <span class="break-word mb-2">
            {{comment.comment_text.substring(0,100)}}
          </span>
          <details *ngIf="comment.comment_text.length >= 100">
            <summary>
               <span class="open">Ver mais</span>
               <span class="close mb-2">Ver menos</span>
            </summary>
            <span>
               {{comment.comment_text.substring(100,1000)}}
            </span>
          </details>
        </div>
        <span class="text-date">
          {{ comment.comment_date | date:'dd/MM/yyyy HH:mm:ss' }}
        </span>
      </li>
      <li>

        <div *ngIf="allowComments == '1';else noAllowComments">
          <div *ngIf="comments.length;else noComments" class="comments-message" >
            <div *ngIf="hasMore;else messageTemplate" (click)="load()" class="text-primary text-muted cursor-pointer text-center pt-2">
              Carregar mais comentários
            </div>
            <ng-template #messageTemplate><p class="text-center text-muted">Não existem mais comentários</p></ng-template>
          </div>
          <ng-template #noComments><p class="text-center text-muted">Sem comentários</p></ng-template>
        </div>
        <ng-template #noAllowComments><p class="text-muted text-center">O usuário desativou os comentários</p></ng-template>
      </li>
    </ul>
  </div>
</div>
<app-comments-form
  [comment_text]="comment"
  (comments)="comments = $event"
  [viewComponent]="viewComponent"
  [photoId]="photoId"
  (viewFormComment)="viewComponent = $event"
>
</app-comments-form>
